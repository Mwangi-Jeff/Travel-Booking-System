import java.util.*;

public class TravelAgency {
    private Map<String, Flight> flights = new HashMap<>();
    private Map<String, Passenger> passengers = new HashMap<>();

    public void addFlight(Flight flight) {
        flights.put(flight.getId(), flight);
    }

    public void addPassenger(Passenger passenger) {
        passengers.put(passenger.getId(), passenger);
    }

    public Flight findFlight(String id) {
        return flights.get(id);
    }

    public Passenger findPassenger(String id) {
        return passengers.get(id);
    }

    public void bookFlight(String flightId, String passengerId) {
        Flight flight = findFlight(flightId);
        Passenger passenger = findPassenger(passengerId);

        if (flight != null && passenger != null) {
            passenger.bookFlight(flight);
            flight.addPassenger(passenger);
        }
    }

    public void cancelBooking(String flightId, String passengerId) {
        Flight flight = findFlight(flightId);
        Passenger passenger = findPassenger(passengerId);

        if (flight != null && passenger != null) {
            passenger.cancelFlight(flight);
            flight.removePassenger(passenger);
        }
    }
}

class Flight {
    private String id;
    private List<Passenger> passengers = new ArrayList<>();

    public void addPassenger(Passenger passenger) {
        passengers.add(passenger);
    }

    public void removePassenger(Passenger passenger) {
        passengers.remove(passenger);
    }

    // constructor, getters and setters omitted for brevity
}

class Passenger {
    private String id;
    private List<Flight> bookedFlights = new ArrayList<>();

    public void bookFlight(Flight flight) {
        bookedFlights.add(flight);
    }

    public void cancelFlight(Flight flight) {
        bookedFlights.remove(flight);
    }

    // constructor, getters and setters omitted for brevity
}
